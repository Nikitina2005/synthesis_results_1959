# Разработка репозитария и классификатора реализаций RISC-V

## Введение

Репозиторий «Разработка репозитория и классификатора реализаций RISC-V» создан в рамках проекта, направленного на сбор, систематизацию, классификацию и анализ открытых реализаций процессорных ядер архитектуры RISC-V. Основная цель проекта — формирование единого репозитория, позволяющего:

1. хранить и структурировать данные о существующих RTL-ядрах RISC-V;

2. проводить их сравнительный анализ по техническим и архитектурным характеристикам;

3. обеспечивать воспроизводимый синтез выбранных ядер с использованием открытых PDK (SKY130, GF180MCU);

4. предоставлять разработчикам и исследователям инструменты для обоснованного выбора подходящей реализации под конкретную задачу проектирования.

Репозиторий включает несколько ключевых компонентов:

1. База данных из 100 реализаций RISC-V-ядер;

Сводная таблица (Excel) содержит сведения о каждом ядре:
Название ядра, ссылка, описание, классификационные признаки, архитектура (бит), поддержка ОС, целевое применение, особенности, лицензия, страна-разработчик, разработчик, дата выпуска, поддержка ядра, тип обработки данных, язык HDL, реализация микроархетиктуры, поддержка инструкций, применение ядра.

2. Дерево классификации в формате pdf;

Представляет визуальную структуру признаков ядер, используется для наглядного сопоставления ядер и навигации по базе.

3. Дизайны ядер, выбранных для синтеза с помощью OpenLane;

Разделы репозитория включают исходные файлы ядер на Verilog, успешно синтезируемые средой OpenLane без критических ошибок, и файлы конфигурации config.json или config.tcl, определяющие параметры потока проектирования.

4. Результаты синтезов ядер на двух PDK.

Использованы PDK: sky130A и gf180mcuC.

В перспективе планируется:

1. расширение базы реализаций RISC-V;

2. добавление новых PDK (например, ASAP7 для исследовательских задач);

3. синтез большего числа IP-ядер.

## Распределение ядер по признакам

На основе собранной базы данных RISC-V ядер были построены диаграммы, отражающие распределение реализаций по основным классификационным признакам.

### Распределение по стране-разработчику
<p align="center">
  <img width="512" height="435" alt="image" src="https://github.com/user-attachments/assets/27625445-b307-45f3-9c6b-4471caa3d58c" />
</p>  
<p align="center">
  Рисунок 1 — Распределение IP-ядер по стране-разработчику.
</p>
Поле "Страна-разработчик" содержит 21 уникальное значение. Наибольшие доли занимают: США — 27% реализаций, Китай — 21%, Россия — 7%, Франция — 7%.
Распределение подтверждает активное участие Китая и США в развитии архитектуры RISC-V. Европейские страны и Россия представлены меньшими долями, что отражает глобальный, но неравномерный характер распределения разработок.

### Распределение по языку HDL
<p align="center">
  <img width="512" height="453" alt="image" src="https://github.com/user-attachments/assets/9e8b70d6-29c9-482e-aa5a-a1738fe8344e" />
</p>  
<p align="center">
  Рисунок 2 — Распределение IP-ядер по языку HDL.
</p>  
Поле "Язык HDL" содержит 12 уникальных значений. Наибольшие доли занимают: Verilog — 28%, SystemVerilog — 28%, неизвестно — 21%.  
Распределение по полю "Язык HDL" показывает, что основными языками описания аппаратуры при разработке RISC-V ядер являются Verilog и SystemVerilog, на долю которых приходится более половины всех реализаций. Это отражает их статус как наиболее распространенных инструментов в индустрии цифрового проектирования. Значительная доля категории "Неизвестно" (21%) указывает на неполноту данных в силу закрытых репозиториев.

### Распределение по лицензии
<p align="center">
  <img width="512" height="446" alt="image" src="https://github.com/user-attachments/assets/a695398e-45c9-446c-8a74-e9ca891f6838" />
</p>  
<p align="center">
  Рисунок 3 — Распределение IP-ядер по лицензии.
</p>
Поле "Лицензия" содержит 14 уникальных значений. Наибольшие доли занимают: проприетарная — 38%, Apache 2.0 — 24%, BSD — 14%.
Анализ распределения по полю "Лицензия" показывает, что большинство реализаций RISC-V ядер распространяются на условиях проприетарных лицензий (38%), что указывает на значительную долю закрытых или коммерческих разработок. При этом Apache 2.0 (24%) и BSD (14%) занимают заметные позиции, отражая активное использование открытых лицензий в академических и исследовательских проектах. Такое соотношение свидетельствует о сосуществовании как открытых, так и коммерческих подходов в реализациях RISC-V.

### Распределение по типу обработки данных
<p align="center">
  <img width="512" height="446" alt="image" src="https://github.com/user-attachments/assets/2f9f9da8-2630-4f07-831b-3ab0202a9da0" />
</p>  
<p align="center">
  Рисунок 4 — Распределение IP-ядер по типу обработки данных.
</p>
Поле "Тип обработки данных" содержит 2 уникальных значения. Скалярный тип — 79%, векторный — 21%.
По полю "Тип обработки данных" видно, что подавляющее большинство реализаций RISC-V ядер относятся к скалярному типу обработки данных (79%). Это свидетельствует о преобладании компактных и универсальных решений, ориентированных на встраиваемые и базовые вычислительные системы. Векторные ядра (21%) занимают меньшую долю, что объясняется их большей сложностью и узкой специализацией, преимущественно в высокопроизводительных и исследовательских проектах.

## Дерево классификации

<img width="2000" height="815" alt="image" src="https://github.com/user-attachments/assets/346175f1-a14a-4abc-9c58-51603b4f20bd" />

## Синтез ядер

В этом проекте проведен сравнительный анализ нескольких RISC‑V ядер с использованием OpenLane, популярного инструмента для автоматизированного физического проектирования ASIC. Целью сравнения является оценить ключевые метрики каждого ядра, включая:

1) Критический путь (Critical Path), характеризующий максимальную тактовую частоту,

2) Площадь кристалла (Die Area) и плотность элементов (Core Util, Cells Count),

3) Энергопотребление (Power Typical),

4) Сложность маршрутизации (Wire Length, Vias).

Сравнение ядер необходимо для выбора оптимального решения под конкретные требования: высокую производительность, компактность, низкое энергопотребление или баланс между всеми параметрами. Это особенно важно для интеграции процессоров в SoC, где ресурсы ограничены.

С полными результатами синтезов можно ознакомиться в директории results.

## Таблица для PDK Sky130A

В этой таблице представлен анализ 15 различных RISC-V ядер, синтезированных и размещенных с использованием SkyWater 130 nm (Sky130A) стандартной ячейки.

| Design               | Total Runtime | Routed Runtime | Core Util (%) | Die Area $`(mm^2)`$ | Cells Count | Wire Length (um) | Vias | Critical Path (ns) | Power Typical (uW) |
|---------------------|---------------|----------------|---------------|----------------|-------------|-----------------|------|------------------|------------------|
| cv32e40p        | 1h2m50s       | 0h44m31s       | 42.34         | 0.584          | 21301       | 1247091        | 199434 | 2.65             | 0.00224          |
| darkriscv            | 0h30m31s      | 0h26m4s        | 61.46         | 0.181          | 7471       | 339394          | 67472  | 5.81             | 0.00281          |
| fedar-f1             | 5h26m52s      | 4h46m28s       | 27.45         | 1.811          | 54118      | 3048005        | 438939 | 115.81           | 0.2474            |
| femtorv32_petitbateau| 1h30m43s      | 0h55m18s       | 23.85         | 1.680          | 33204       | 3383382        | 326538 | 7.37             | 0.0694           |
| femtorv32_quark      | 0h12m32s      | 0h8m48s        | 62.21         | 0.161          | 6351         | 283972          | 56940  | 4.59             | 0.00329          |
| hazard3         | 0h28m38s      | 0h21m38s       | 58.59         | 0.259          | 11160         | 473599          | 96726  | 8.69             | 0.00395          |
| ibex           | 1h6m10s      | 0h55m22s       | 55.32         | 0.340          | 14839       | 807876          | 138186 | 1.60             | 0.01427          |
| miriscv         | 0h41m43s      | 0h27m0s        | 34.31         | 0.731          | 19355       | 1290821        | 172071 | 1.62             | 0.00228          |
| picorv32             | 0h21m16s      | 0h16m33s       | 61.22         | 0.208          | 8680         | 446448          | 80167  | 0.51             | 0.00241          |
| riscv-crypto      | 0h22m44s     | 0h16m13s      | 31.07         | 0.263          | 6932         | 444256          | 62129  | 5.80             | 0.00385          |
| schoolriscv  | 0h7m41s       | 0h5m40s        | 51.87         | 0.119          | 5308         | 156365          | 36211  | 2.52             | 0.0001014        |
| scr1        | 1h59m58s      | 1h22m9s        | 33.03         | 0.909          | 26166       | 1581000        | 233467 | 15.29            | 0.01032          |
| serv             | 0h3m18s       | 0h2m2s         | 9.64          | 0.16           | 856         | 67090           | 7870   | 1.68             | 0.0003         |
| ssrv             | 7h3m42s       | 3h6m12s         | 13.36          | 6.94           | 72592         | 9195263           | 772050   | 12.63             | 0.0527         |
| vexriscv             | 0h13m13s      | 0h9m5s         | 61.79         | 0.199          | 8120         | 366402          | 69401  | 1.99             | 0.00262          |

## Таблица для PDK gf180mcuC

В этой таблице представлен анализ 13 различных RISC-V ядер, синтезированных и размещенных с использованием GlobalFoundries 180nm MCU (gf180mcuC) стандартной ячейки.

| Design | Total Runtime | Routed Runtime | Core Util (%) | Die Area $(mm^2)$ | Cells Count | Wire Length (um) | Vias | Critical Path (ns) | Power Typical (uW) |
|--------|---------------|----------------|---------------|-----------------|-------------|-----------------|------|------------------|------------------|
| darkriscv | 0h10m3s | 0h5m55s | 64.66 | 2.32 | 8050 | 781932 | 89585 | 11.1 | 0.0539 |
| fedar-f1 | 5h26m8s | 4h36m30s | 44.14 | 21.28 | 65045 | 6124273 | 591805 | 201.44 | 173.9 |
| femtorv32_petitbateau | 1h11m26s | 0h34m42s | 21.96 | 31.12 | 37438 | 7621747 | 454136 | 15.55 | 1.452 |
| femtorv32_quark | 0h9m16s | 0h4m58s | 49.03 | 2.77 | 7084 | 724954 | 76147 | 8.21 | 0.0511 |
| hazard3 | 0h21m0s | 0h10m29s | 52.43 | 4.37 | 14406 | 1308899 | 152307 | 16.25 | 0.122 |
| miriscv | 0h23m30s | 0h12m11s | 50.86 | 7.01 | 21061 | 2132143 | 217586 | 3.87 | 0.0447 |
| picorv32 | 0h11m59s | 0h7m1s | 63.99 | 2.67 | 9212 | 860573 | 99136 | 1.42 | 0.0471 |
| riscv-crypto | 0h9m32s | 0h5m14s | 53.86 | 1.99 | 6188 | 688371 | 70106 | 12.01 | 0.483|
| schoolriscv | 0h5m34s | 0h3m45s | 69.59 | 1.33 | 5767 | 385396 | 48178 | 4.66 | 0.002072 |
| scr1 | 1h24m57s | 0h41m11s | 53.81 | 8.69 | 28377 | 3140255 | 315074 | 26.36 | 0.0891 |
| serv | 0h2m4s | 0h1m21s | 30.39 | 0.64 | 944 | 80954 | 9377 | 3.5 | 0.00418 |
| ssrv | 4h6m30s | 1h27m31s | 24.03 | 67.89 | 83109 | 14797978 | 1052763 | 21.98 | 0.977 |
| vexriscv | 0h13m4s | 0h7m39s | 62.46 | 2.61 | 10566 | 800749 | 106624 | 3.59 | 0.0655 |

## Анализ результатов для PDK Sky130A

1. Тактовый период и критический путь

Наименьший критический путь: picorv32 $-$ 0.51 нс, что позволяет работать на максимальной частоте.

Наибольший критический путь: fedar-f1 $-$ 115.81 нс, что сильно ограничивает рабочую частоту.

Быстрые и компактные ядра (picorv32, serv, ibex) обеспечивают высокую тактовую частоту при минимальных задержках.

2. Площадь ядра

Наименьшая площадь: schoolriscv $-$ 0.119 $`~мм^2`$.

Наибольшая площадь: ssrv $-$ 6.94 $`~мм^2`$.

Компактные ядра с низкой площадью (schoolriscv, serv, picorv32) подходят для интеграции в ограниченные по площади SoC.

3. Энергопотребление

Наименьшее энергопотребление: schoolriscv $-$ 0.0001014 uW, serv $-$ 0.0003 uW.

Наибольшее энергопотребление: fedar-f1 $-$ 0.2474 uW.

Малые ядра выигрывают по энергии, что важно для низкопотребляющих систем.

4. Routing и congestion

Наибольшее число проводников и vias у крупных ядер (ssrv, femtorv32_petitbateau, fedar-f1), что может потребовать дополнительных слоев маршрутизации и влиять на производительность.

Малые ядра имеют простую маршрутизацию (serv, schoolriscv, picorv32).

## Анализ результатов для PDK gf180mcuC

1. Тактовый период и критический путь

Наименьший критический путь: picorv32 $-$ 1.42 нс.

Наибольший критический путь: fedar-f1 $-$ 201.44 нс.

2. Площадь ядра

Наименьшая площадь: serv $-$ 0.64 $`~мм^2`$.

Наибольшая площадь: ssrv $-$ 67.89 $`~мм^2`$.

3. Энергопотребление

Наименьшее энергопотребление: schoolriscv $-$ 0.002072 uW.

Наибольшее энергопотребление: fedar-f1 $-$ 173.9 uW.

4. Routing и congestion

Наибольшая нагрузка на маршрутизацию у ядра ssrv.

Наименьшая нагрузка на маршрутизацию у ядра serv.

## Вывод

**Таким образом, оптимальное ядро для большинства применений $-$ picorv32:**

1) Очень короткий критический путь (0.51 нс и 1.42 нс), позволяющий высокую тактовую частоту, а значит, высокую производительность.

2) Небольшая площадь (0.208 $`~мм^2`$ и 2.67 $`мм^2`$) и умеренное число ячеек.

3) Хорошее значение Core Utilization, не слишком большая, чтобы были проблемы с размещением и трассировкой, но и не слишком маленькая, что исключает неэффективное использование площади кристалла.

4) Низкое энергопотребление (0.00241 uW и 0.0471 uW).

Баланс между производительностью и ресурсами делает его лучшим выбором для компактного и быстрого SoC.



